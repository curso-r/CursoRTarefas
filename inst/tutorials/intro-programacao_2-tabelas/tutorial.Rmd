---
title: "Tarefas: Tabelas"
description: "Exercícios do curso 'Introdução à programação com R'"
encoding: "UTF-8"
output: 
  learnr::tutorial:
    css: css/custom.css
    language: pt
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
params:
  url_form: "https://docs.google.com/forms/d/e/1FAIpQLScGkPoq2cTyxTLoaTGQm-TqS3bk8qYoEI34fG9AbZixopcIgA/viewform"
---

```{r setup, include=FALSE}
library(learnr)
library(gradethisBR)
Sys.setenv(LANG = "pt")

knitr::opts_chunk$set(echo = FALSE, exercise.reveal_solution = FALSE)


gradethisBR::gradethis_setup(
  code_correct =  "Correto! Parabéns!",
  pass = "Correto! Parabéns!"#,
  #fail =  "Incorreto. Tente novamente! "
)
```


**Exercícios**

> Boas vindas! 
>
> Este material faz parte do curso [Introdução à programação com R](https://curso-r.com/cursos/intro-programacao/), da [Curso-R](https://www.curso-r.com/).
>
> Caso tenha dúvidas sobre como resolver os exercícios,  pedimos que escreva no [<i class="fab fa-discourse"></i> Discourse](https://discourse.curso-r.com/).


## Dataframes

A base de dados `airquality` apresenta dados de qualidade do ar obtidos diariamente, em Nova York, entre os meses de maio e setembro de 1973:

```{r echo=TRUE}
airquality
```


```{r setupAirquality}
airquality
``` 

Use o dataframe airquality para responder às questões abaixo:

a) Use uma função em R para descobrir quantas colunas a base `airquality` tem:

```{r tabelas-df-a, exercise = TRUE, exercise.setup = "setupAirquality"}

```

```{r tabelas-df-a-hint}
___(airquality)
```

```{r tabelas-df-a-solution}
ncol(airquality)
```


```{r tabelas-df-a-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você contou as colunas corretamente.")
  }
  fail()
})
```

b) Quantas linhas `airquality` tem?

```{r tabelas-df-b, exercise = TRUE, exercise.setup = "setupAirquality"}

```

```{r tabelas-df-b-hint}
___(airquality)
```

```{r tabelas-df-b-solution}
nrow(airquality)
```

```{r tabelas-df-b-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você contou as linhas corretamente.")
  }
  fail()
})
```

c) Execute a função `head()`. O que essa função retorna?

```{r tabelas-df-c-codigo, exercise = TRUE, exercise.setup = "setupAirquality"}
head(airquality)
```


```{r tabelas-df-c, echo=FALSE}
question("O que a função `head()` retorna?",
  answer("A função `head()` retorna as últimas linhas de um dataframe"),
  answer("A função `head()` retorna as linhas aleatórias de um dataframe"),
  answer('A função `head()` retorna as primeiras linhas de um dataframe', correct = TRUE),
  allow_retry = TRUE,
  random_answer_order = TRUE,
  correct = "Correto! Parabéns. A função `head()` é útil para observar as primeiras linhas de um dataframe. <br> Curiosidades: <br> - A função `tail()` é similar, porém apresenta as últimas linhas. <br> - A função `dplyr::slice_sample(airquality, n = 6)` nos permite buscar linhas aleatórias na base de dados, usando o número de linhas que queremos no argumento `n`.",
  incorrect = "Incorreto. Tente novamente :) <br> Dica 1: Experimente clicar em `Executar código` e observar os resultados." 
)
```



d) Quais são os nomes das colunas?

```{r tabelas-df-d, exercise = TRUE, exercise.setup = "setupAirquality"}

```

```{r tabelas-df-d-hint}
___(airquality)
```

```{r tabelas-df-d-solution}
colnames(airquality)
```

```{r tabelas-df-d-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você consultou o nome das colunas corretamente. Existe mais de uma função que possibilita conferir o nome da colunas de um dataframe, como:  `colnames()` e `names()`.")
  }
  fail()
})
```


e) Qual é a classe da coluna `Ozone`? Dicas: `class()` e `$`

```{r tabelas-df-e, exercise = TRUE, exercise.setup = "setupAirquality"}

```

```{r tabelas-df-e-hint}
class(airquality______)
```

```{r tabelas-df-e-solution}
class(airquality$Ozone)
```

```{r tabelas-df-e-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você verificou a classe da coluna Ozone corretamente.")
  }
  fail()
})
```

f) Execute o seguinte código `dplyr::glimpse(airquality)`, e observe o que ele retorna.

```{r tabelas-df-f-codigo, exercise = TRUE, exercise.setup = "setupAirquality"}
dplyr::glimpse(airquality)
```

```{r tabelas-df-f, echo=FALSE}
question("O que o código `dplyr::glimpse(airquality)` retorna? Selecione todas as opções válidas:",
  answer("Número de linhas de uma base de dados", correct = TRUE),
  answer("Número de colunas de uma base de dados", correct = TRUE),
    answer("Nome das colunas de uma base de dados", correct = TRUE),
  answer("Classe das colunas de uma base de dados", correct = TRUE),
    answer("Observações das primeiras linhas em uma base de dados", correct = TRUE),
    answer("Observações das últimas linhas  em uma base de dados"),
      answer("Observações de linhas aleatórias em uma base de dados"),
      answer("A média dos valores de cada coluna"),
  allow_retry = TRUE,
  random_answer_order = TRUE,
  correct = "Muito bom! A função `glimpse()` do pacote `dplyr`retorna várias informações interessantes sobre uma base de dados, como: o número de linhas, número de colunas, nome das colunas, classe de cada coluna e as primeiras observações da coluna, para ter uma ideia dos dados disponíveis. ",
  incorrect = "Incorreto. Tente novamente :) <br> Dica 1: Experimente clicar em `Executar código` e observar os resultados." 
)
```




g) Utilizando a resposta da questão anterior, quais são os tipos de cada coluna da tabela `airquality`?

```{r tabelas-df-g, echo=FALSE}
question("Quais são os tipos de cada coluna da tabela `airquality`?",
  answer("Integer, Integer, Double, Integer, Integer, Integer", correct = TRUE),
    answer("Todos são numéricos"),
  allow_retry = TRUE,
  random_answer_order = TRUE,
  correct = "Muito bom! :)",
  incorrect = "Incorreto. Tente novamente :) <br> Dica 1: Experimente clicar em `Executar código` e observar os resultados." 
)
```


## Desafio

Use o dataframe `airquality` para responder às questões abaixo. __Vamos calcular o desvio padrão de Ozone sem usar a função `sd()`__. O resultado de um exercício é usado no próximo, então iremos guardar o resultado de cada etapa em um objeto.

a) Calcule a média da coluna `Ozone` (excluindo os NAs), e guarde o resultado em um objeto chamado `media_ozone`.  Dica: para remover os NA's, utilize o argumento `na.rm=TRUE` da função que calcula a média.

```{r tabelas-desafio-a, exercise = TRUE, exercise.setup = "setupAirquality"}
# a)
media_ozone <-  #___ 
media_ozone
```

```{r tabelas-desafio-a-hint}
# a)
media_ozone <- mean(_____$_____, na.rm = TRUE)
media_ozone
```

```{r tabelas-desafio-a-solution}
# a)
media_ozone <- mean(airquality$Ozone, na.rm = TRUE)
media_ozone
```

```{r tabelas-desafio-a-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você calculou a média da coluna Ozone corretamente, excluindo os NAs.")
  }
  fail()
})
```



b) Subtraia da coluna `Ozone` a sua própria média (centralização), e guarde o resultado em um objeto chamado `ozone_centralizado`. 

```{r resposta_ate_a}
media_ozone <- mean(airquality$Ozone, na.rm = TRUE)
```

```{r tabelas-desafio-b, exercise = TRUE, exercise.setup = "resposta_ate_a"}
# b) 
ozone_centralizado <-  #___
ozone_centralizado
```

```{r tabelas-desafio-b-hint}
# b) 
ozone_centralizado <- ____$____ - media_ozone
ozone_centralizado
```

```{r tabelas-desafio-b-solution}
# b) 
ozone_centralizado <- airquality$Ozone - media_ozone
ozone_centralizado
```

```{r tabelas-desafio-b-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você calculou a centralização da coluna Ozone.")
  }
  fail()
})
```



c) Eleve o vetor `ozone_centralizado` ao quadrado, e guarde o resultado em um objeto chamado `ozone_centralizado_ao_quadrado`.

```{r resposta_ate_b}
media_ozone <- mean(airquality$Ozone, na.rm = TRUE)
ozone_centralizado <- airquality$Ozone - media_ozone
```



```{r tabelas-desafio-c, exercise = TRUE, exercise.setup = "resposta_ate_b"}
# c) 
ozone_centralizado_ao_quadrado <- # ___ 
ozone_centralizado_ao_quadrado
```

```{r tabelas-desafio-c-hint}
# c) 
ozone_centralizado_ao_quadrado <-  ___  ^ 2
ozone_centralizado_ao_quadrado
```

```{r tabelas-desafio-c-solution}
# c)
ozone_centralizado_ao_quadrado <-  ozone_centralizado ^ 2
ozone_centralizado_ao_quadrado
```

```{r tabelas-desafio-c-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Muito bom! Você elevou o vetor `ozone_centralizado` ao quadrado.")
  }
  fail()
})
```



d) Calcule a média do vetor `ozone_centralizado_ao_quadrado`, e guarde o resultado em um objeto chamado `media_ozone_centralizado_ao_quadrado`.

```{r resposta_ate_c}
media_ozone <- mean(airquality$Ozone, na.rm = TRUE)
ozone_centralizado <- airquality$Ozone - media_ozone
ozone_centralizado_ao_quadrado <-  ozone_centralizado ^ 2
```

```{r tabelas-desafio-d, exercise = TRUE, exercise.setup = "resposta_ate_c"}
# d) 
media_ozone_centralizado_ao_quadrado <- # ___ 
media_ozone_centralizado_ao_quadrado
```

```{r tabelas-desafio-d-hint}
# d) 
media_ozone_centralizado_ao_quadrado <-  mean(___, na.rm = TRUE) 
media_ozone_centralizado_ao_quadrado
```

```{r tabelas-desafio-d-solution}
# d)
media_ozone_centralizado_ao_quadrado <- mean(ozone_centralizado_ao_quadrado, na.rm = TRUE)
media_ozone_centralizado_ao_quadrado
```

```{r tabelas-desafio-d-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Correto! Falta pouco.")
  }
  fail()
})
```



e) Calcule a raíz quadrada do objeto `media_ozone_centralizado_ao_quadrado`, e guarde o resultado em um objeto chamado `desvio_padrao_ozone_calculado`.

```{r resposta_ate_d}
media_ozone <- mean(airquality$Ozone, na.rm = TRUE)
ozone_centralizado <- airquality$Ozone - media_ozone
ozone_centralizado_ao_quadrado <-  ozone_centralizado ^ 2
media_ozone_centralizado_ao_quadrado <- mean(ozone_centralizado_ao_quadrado, na.rm = TRUE)
```

```{r tabelas-desafio-e, exercise = TRUE, exercise.setup = "resposta_ate_d"}
# e)
desvio_padrao_ozone_calculado <- # ___
desvio_padrao_ozone_calculado
```

```{r tabelas-desafio-e-hint}
# e)
desvio_padrao_ozone_calculado <-  sqrt(___)
desvio_padrao_ozone_calculado
```

```{r tabelas-desafio-e-solution}
desvio_padrao_ozone_calculado <- sqrt(media_ozone_centralizado_ao_quadrado)
desvio_padrao_ozone_calculado
```

```{r tabelas-desafio-e-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Correto! Parabéns, até aqui você calculou o desvio padrão da coluna Ozone.")
  }
  fail()
})
```



f) Calcule o desvio padrão da coluna Ozone usando a função `sd()` (dica: `sd(airquality$Ozone, na.rm = TRUE)`). Compare o resultado do desvio padrão que calculamos, e o resultado da função `sd()`: são iguais?

```{r resposta_ate_e}
media_ozone <- mean(airquality$Ozone, na.rm = TRUE)
ozone_centralizado <- airquality$Ozone - media_ozone
ozone_centralizado_ao_quadrado <-  ozone_centralizado ^ 2
media_ozone_centralizado_ao_quadrado <- mean(ozone_centralizado_ao_quadrado, na.rm = TRUE)
desvio_padrao_ozone_calculado <- sqrt(media_ozone_centralizado_ao_quadrado)
```

```{r tabelas-desafio-f, exercise = TRUE, exercise.setup = "resposta_ate_e"}
# f)
sd_ozone_funcao <- #___  
sd_ozone_funcao
desvio_padrao_ozone_calculado == sd_ozone_funcao
```

```{r tabelas-desafio-f-hint}
# f)
sd_ozone_funcao <- sd(___, na.rm = TRUE) 
sd_ozone_funcao
desvio_padrao_ozone_calculado == sd_ozone_funcao
```

```{r tabelas-desafio-f-solution}
# f)
sd_ozone_funcao <- sd(airquality$Ozone, na.rm = TRUE)
sd_ozone_funcao
desvio_padrao_ozone_calculado == sd_ozone_funcao

```

```{r tabelas-desafio-f-check}
grade_this({
  if (identical(.result, .solution)) {
    pass("Correto! Os resultados são diferentes! Isso porque a função `sd()` calcula o desvio padrão utilizando a variância amostral. Por outro lado, utilizamos a variância populacional para calcular o desvio padrão.")
  }
  fail()
})
```

## Enviar as respostas

Se você completou a tarefa e quer submeter, clique no botão abaixo ('Generate') para gerar o seu código hash e envie usando o formulário a seguir:

```{r context="server"}
learnrhash::encoder_logic()
```

```{r encode, echo=FALSE}
learnrhash::encoder_ui(ui_before = " ", ui_after = " ")
```

### Formulário para enviar o código

Caso o formulário abaixo não carregue, <a href='`r params$url_form`'>clique neste link</a> para abrir o formulário.


<iframe src="`r params$url_form`" width="640" height="673" frameborder="0" marginheight="0" marginwidth="0">Carregando…</iframe>



